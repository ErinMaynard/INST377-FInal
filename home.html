<!DOCTYPE html>
<html>

<head>
    <title>Final Exam </title>
    <link rel="stylesheet" href="stylesheet.css">
</head>

<body>
    <h1>Welcome to Book Nook </h1>

    <nav class="header">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="project.html">Project Specfic Functionality</a></li>
        </ul>
    </nav>

    <section class="About ">

        <h3>
            Welcome to the book nook! Here, users can filter through books to figure out what they want to do for their
            next read.
            In order to find your next book, select the Start Search button below to be redirected to the main filtering
            page of the website; or, feel free to browse the most popular books in English based off of the Gutenberg Index.
            Happy Reading!
        </h3>

        <button class="button-28" id="button-28" role="button">Start Search</button>
    </section>

    <table id="bookTable">

    </table>

    <script>
        document.getElementById("button-28").addEventListener("click", function () {
            window.location.href = "project.html";
        });

        async function loadBooks() {

            try {
                const res = await fetch(`http://gutendex.com/books?languages=en`)
                const data = await res.json();
                const books = data.results;

                const bookTable = document.getElementById('bookTable');

                bookTable.innerHTML = `
                                <tr>
                                    <th>Title</th>
                                    <th>Author</th>
                                <tr>
                                    `;

                books.forEach((book) => {
                    const tableRow = document.createElement("tr");
                    const bookNameInTable = document.createElement("td");
                    const bookAuthorInTable = document.createElement("td");

                    bookNameInTable.innerHTML = book.title || "No title available";
                    bookAuthorInTable.innerHTML = (book.authors && book.authors.join(", ")) || "No author available";

                    tableRow.appendChild(bookNameInTable);
                    tableRow.appendChild(bookAuthorInTable);

                    bookTable.appendChild(tableRow);
                });

                bookTable.style.display = 'table';

            } catch (error) {
                alert("Failed to load books. Please try again.");
            }


        }

        window.onload=loadBooks;
    </script>
</body>

</html>